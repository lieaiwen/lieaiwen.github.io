## 4.0 作用域

>作用域指一个变量的作用的范围 。<br>
> 作用域最大的用处就是**隔离变量**，不同作用域下同名变量不会有冲突

通常来说，一段程序代码中所用到的名字并不总是有效和可用
的，而限定这个名字的可用性的代码范围就是这个名字的作用域。作用域的使用提高了程序逻辑
的局部性，增强了程序的可靠性，减少了名字冲突。
<br>
在 JavaScript 中有3种作用域类型：

1.0 全局作用域 <br>
2.0 函数作用域 （局部作用域）
3.0 es6块级作用域

#### 1.0 全局作用域
>直接写在 script 标签中的 JavaScript 代码都是全局作用域。当页面打开运行时全局作用域就会自
>动创建，而当页面关闭时就会销毁。在全局作用域中有一个全局的 window 对象可以使用，而所
>有全局作用域对象都会作为 window 对象的属性来使用。

栗子：
```angular2html
<script>
        console.log(window);
        var a = 10;
        console.log(window.a); // 10
 
        function aa() {
            console.log('aa')
        }
        window.aa(); // aa
 
        var aaa = {
            name: '张三'
        }
        console.log(window.aaa.name); //张三
    </script>
```
**注意：** 如果这个对象 / 属性 / 方法是 window 的，那么在使用这些对象 / 属性 / 方法时，可以省略 window 的编写。

#### 2.0 函数作用域
>作用于函数内的代码环境，就是局部作用域。由于跟函数有关，所以也称为函数作用域。

2.1 局部作用域（函数作用域）是在调用函数时才会被创建，函数执行完毕后就自动销毁。同时，每
调用一次函数就会创建一个新的函数作用域，它们之间是相互独立的。
<br>

2.2在函数作用域中可以访问全局作用域，而在全局作用域中不能访问函数作用域。
<br>

2.3 当在函数作用域 中使用一个变量时，它会先在自身作用域内查找，如果找到就直接使用，如果没有找到则会向上
一级作用域查找，直到找到全局作用域为止。如果都没有找到则会报错。
<br>

栗子：
```angular2html
<script>
        var age = 18;
 
        function fn() {
            var age = 20;
            console.log(age); // 20
            console.log(this.age); // 18  
            //console.log(this);
            console.log(window.age); // 18
        }
        window.fn();
    </script>
```
**注意：** 上面普通函数里面的 this指向的是window

#### 3.0 自动全局作用域
>如果您为尚未声明的变量赋值，此变量会自动成为全局变量。

```angular2html
    name = 50
    function fn() {
        age = 19;
        console.log(age); // 19
    }
    fn();
    console.log(window.age); // 19
    console.log(age); // 19
    console.log(name); // 50
```
**注意：** 如果在函数中定义变量时没有指定 var 关键字，那么这个变量会自动提升为全局作用域的变量。

**作用域链**

当查找变量的时候，会先从当前执行上下文的变量对象中查找，如果没有找到，就会从父级(词法层面上的父级)执行上下文的变量对象中查找，一直找到全局上下文的变量对象，也就是全局对象。这样由多个执行上下文的变量对象构成的链表就叫做作用域链

成功只有一个 —— 按照自己的方式，去度过人生。--《明朝那些事儿》
